<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Exploring the GDELT data set with Amazon Athena</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Exploring the GDELT data set with Amazon Athena</h1>
</header>
<section data-field="subtitle" class="p-summary">
The Global Database of Events, Language and Tone (GDELT) Project monitors the world’s broadcast, print, and web news from nearly every…
</section>
<section data-field="body" class="e-content">
<section name="027b" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="80f3" id="80f3" class="graf graf--h3 graf--leading graf--title">Exploring the GDELT data set with Amazon Athena</h3><p name="ba23" id="ba23" class="graf graf--p graf-after--h3">The <a href="http://www.gdeltproject.org/" data-href="http://www.gdeltproject.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Global Database of Events, Language and Tone (GDELT) Project</a> monitors the world’s broadcast, print, and web news from nearly every corner of every country in over 100 languages and identifies the people, locations, organisations, counts, themes, sources, emotions, counts, quotes, images and events driving our global society every second of every day.</p><p name="18fa" id="18fa" class="graf graf--p graf-after--p">Data set v1.0 is <a href="https://aws.amazon.com/public-datasets/gdelt/" data-href="https://aws.amazon.com/public-datasets/gdelt/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">publicly available in S3</a> and I figured that this would be as good an excuse as any to play with my new favorite analytics service, <a href="https://aws.amazon.com/athena/" data-href="https://aws.amazon.com/athena/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Amazon Athena</a>. Yes, <a href="https://aws.amazon.com/redshift/" data-href="https://aws.amazon.com/redshift/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Redshift</a>, I still love you, baby ;)</p><p name="890b" id="890b" class="graf graf--p graf-after--p">The data set contains (at the time to writing) 1,542 uncompressed CSV files: 58 columns, 440+ million lines, 140+ GB. It is updated daily.</p><p name="9394" id="9394" class="graf graf--p graf-after--p">Data is formatted according to a couple of specs (<a href="http://data.gdeltproject.org/documentation/GDELT-Data_Format_Codebook.pdf" data-href="http://data.gdeltproject.org/documentation/GDELT-Data_Format_Codebook.pdf" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a> and <a href="http://data.gdeltproject.org/documentation/CAMEO.Manual.1.1b3.pdf" data-href="http://data.gdeltproject.org/documentation/CAMEO.Manual.1.1b3.pdf" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>, PDF). A few lookup tables are also available <a href="http://gdeltproject.org/data/lookups/" data-href="http://gdeltproject.org/data/lookups/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a> (country codes, organisation names, etc.).</p><p name="60b4" id="60b4" class="graf graf--p graf-after--p">All right, let’s get to business. As you may know, Athena is able to query data hosted in S3 : no infrastructure to launch or manage, no data preparation, no loading time. All we have to do is <a href="https://docs.aws.amazon.com/athena/latest/ug/creating-tables.html" data-href="https://docs.aws.amazon.com/athena/latest/ug/creating-tables.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">create a table</a> using the Hive DDL.</p><p name="8fe0" id="8fe0" class="graf graf--p graf-after--p">This is how we do it. All scripts and queries are available on <a href="https://github.com/juliensimon/aws/tree/master/athena/gdelt" data-href="https://github.com/juliensimon/aws/tree/master/athena/gdelt" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Github</a>, including how to create lookup tables.</p><figure name="e2ac" id="e2ac" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/juliensimon/e17e6179b5bfa91c35ae6e2b23ae7e31#file-gistfile1-sql.js"></script></figure><p name="423b" id="423b" class="graf graf--p graf-after--figure">Quite a mouthful, but pretty straightforward: just read the doc, define as many columns as needed with the right type and point to the S3 bucket holding all files. One immediate benefit of this is that whenever we run queries, Athena will automatically use all available files, including the additional one that’s delivered daily. Zero work!</p><p name="5956" id="5956" class="graf graf--p graf-after--p">OK, let’s run some queries. I’m using <a href="https://docs.aws.amazon.com/athena/latest/ug/connect-with-jdbc.html" data-href="https://docs.aws.amazon.com/athena/latest/ug/connect-with-jdbc.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">SQL Workbench/J with the Athena JDBC driver</a>.</p><figure name="92f1" id="92f1" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/juliensimon/03acbf4331d4a95ad94d9f4aba06d376#file-queries-sql.js"></script></figure><p name="b422" id="b422" class="graf graf--p graf-after--figure">None of these took more than 30 seconds and that’s with uncompressed CSV, the least performing data format possible. <a href="https://docs.aws.amazon.com/athena/latest/ug/convert-to-columnar.html" data-href="https://docs.aws.amazon.com/athena/latest/ug/convert-to-columnar.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Converting the data set columnar formats</a> such as Parquet or Orc would yield a massive improvement, but it’s extra work, so why bother? ;)</p><p name="bcf1" id="bcf1" class="graf graf--p graf-after--p graf--trailing">That’s it for today. Thanks for reading!</p></div></div></section><section name="f521" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="e2fd" id="e2fd" class="graf graf--p graf--leading graf--trailing"><em class="markup--em markup--p-em">Originally published at </em><a href="http://blog.julien.org/2017/03/exploring-gdelt-data-set-with-amazon.html" data-href="http://blog.julien.org/2017/03/exploring-gdelt-data-set-with-amazon.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">blog.julien.org</em></a><em class="markup--em markup--p-em"> on March 3, 2017.</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@julsimon" class="p-author h-card">Julien Simon</a> on <a href="https://medium.com/p/a6f7b1d67a6e"><time class="dt-published" datetime="2017-03-03T00:00:00.000Z">March 3, 2017</time></a>.</p><p><a href="https://medium.com/@julsimon/exploring-the-gdelt-data-set-with-amazon-athena-a6f7b1d67a6e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 26, 2025.</p></footer></article></body></html>
